@model CourseContentVM

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@Model.CourseName - Course Content</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            background: #f5f7fa;
            font-family: 'Segoe UI', sans-serif;
        }

        .section-card {
            border-radius: 12px;
            padding: 20px;
            background: white;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.07);
            margin-bottom: 25px;
        }

        .lesson-item {
            padding: 12px;
            border-radius: 10px;
            background: #f8f9fc;
            margin-bottom: 10px;
        }

        .btn-icon {
            padding: 4px 10px;
        }
    </style>
</head>

<body>

    <div class="container mt-5 mb-5">

        <div class="d-flex justify-content-end mb-4">
            <a href="/Admin/Course/CoursesReview" class="btn btn-dark">
                Courses Review
            </a>
        </div>


        <div class="text-center mb-4">
            <h2 class="fw-bold">@Model.CourseName</h2>
            <p class="text-muted">All course sections & lessons</p>
        </div>

        @foreach (var sec in Model.Sections.OrderBy(s => s.SectionOrder))
        {
            <div class="section-card">

                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="mb-0">
                        <strong>@sec.SectionOrder.</strong> @sec.SectionName
                    </h4>

                    <div>
                        @* <a href="/Instructor/Section/EditSection/@sec.SectionId" class="btn btn-warning btn-sm btn-icon">Edit</a> *@
                        <a href="/Admin/Section/DeleteSection/@sec.SectionId"
                           onclick="return confirmDelete(event, '@sec.SectionId','Section')"
                           class="btn btn-outline-danger btn-sm btn-icon">Delete</a>


                    </div>
                </div>

                <hr />

                @if (sec.Lessons != null && sec.Lessons.Count > 0)
                {
                    @foreach (var lesson in sec.Lessons.OrderBy(l => l.LessonOrder))
                    {
                        <div class="lesson-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>@lesson.LessonOrder.</strong> @lesson.LessonName
                            </div>

                            <div>
                                <a href="/Admin/Lesson/DisplayLesson/@lesson.LessonId" class="btn btn-outline-primary btn-sm btn-icon">View</a>
                                <a href="/Admin/Lesson/DeleteLesson/@lesson.LessonId"
                                   onclick="return confirmDelete(event, '@lesson.LessonId','lesson')"
                                   class="btn btn-outline-danger btn-sm btn-icon">Delete</a>
                            </div>
                        </div>
                    }
                }
                else
                {
                    <p class="text-muted fst-italic">No lessons added yet.</p>
                }

            </div>
        }

    </div>


    <script>
        function confirmDelete(e, id, type) {
            e.preventDefault(); // ← stop the default link navigation

            if (confirm("Are you sure you want to delete this " + type + "?")) {
                // If OK → redirect manually
                window.location.href = `/Admin/${type.charAt(0).toUpperCase() + type.slice(1)}/Delete${type.charAt(0).toUpperCase() + type.slice(1)}/${id}`;
            }

            // If Cancel → do nothing, stay on same page
            return false;
        }
    </script>


</body>
</html>
